// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["clientExtensions"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Page {
  id          Int          @id @default(autoincrement())
  name        String
  link        String?
  type        PageType
  RoleOnPage  RoleOnPage[]
  active      Boolean      @default(true)
  PageGroup   PageGroup?   @relation(fields: [pageGroupId], references: [id])
  pageGroupId Int?
}

model Company {
  id              Int               @id @default(autoincrement())
  companyId       String            @unique @default(uuid())
  name            String
  code            String?
  gstNo           String?
  panNo           String?
  contactName     String?
  contactMobile   BigInt
  contactEmail    String?
  branch          Branch[]
  country         Country[]
  active          Boolean           @default(true)
  Department      Department[]
  Role            Role[]
  Subscription    Subscription[]
  finYear         FinYear[]
  PartyCategory   PartyCategory[]
  Party           Party[]
  ProductBrand    ProductBrand[]
  ProductCategory ProductCategory[]
  Product         Product[]
  PurchaseBill    PurchaseBill[]
  SalesBill       SalesBill[]
  PurchaseReturn  PurchaseReturn[]
  SalesReturn     SalesReturn[]
  Uom             Uom[]
  OpeningStock    OpeningStock[]
  TaxTerm         TaxTerm[]
  TaxTemplate     TaxTemplate[]
  PartyBranch     PartyBranch[]
  openingBalances OpeningBalance[]
}

model Subscription {
  id        Int      @id @default(autoincrement())
  Company   Company? @relation(fields: [companyId], references: [id], onDelete: Cascade)
  companyId Int
  validFrom DateTime
  expireAt  DateTime
  code      String
  maxUsers  Int
}

model Branch {
  id               Int                @id @default(autoincrement())
  branchName       String
  branchCode       String?
  contactName      String?
  contactMobile    BigInt
  contactEmail     String?
  address          String?            @default("")
  company          Company            @relation(fields: [companyId], references: [id])
  companyId        Int
  active           Boolean            @default(true)
  EmployeeCategory EmployeeCategory[]
  UserOnBranch     UserOnBranch[]
  Employee         Employee[]
  idPrefix         String?
  idSequence       String?
  tempPrefix       String?
  tempSequence     String?
  prefixCategory   PrefixCategory?
  PurchaseBill     PurchaseBill[]
  PurchaseReturn   PurchaseReturn[]
  Stock            Stock[]
  SalesBill        SalesBill[]
  SalesReturn      SalesReturn[]
  OpeningStock     OpeningStock[]
  Payment          Payment[]
  DeliveryChallan  DeliveryChallan[]
  DeliveryInvoice  DeliveryInvoice[]
  openingBalances  OpeningBalance[]
  DeliveryBranchPo Po[]               @relation(name: "deliveryBranch")
  PoRaised         Po[]               @relation(name: "poRaisedBranch")
}

model UserOnBranch {
  id       Int    @id @default(autoincrement())
  Branch   Branch @relation(fields: [branchId], references: [id])
  branchId Int
  User     User   @relation(fields: [userId], references: [id])
  userId   Int
}

model Role {
  id          Int          @id @default(autoincrement())
  name        String
  company     Company      @relation(fields: [companyId], references: [id], onDelete: Cascade)
  companyId   Int
  User        User[]
  RoleOnPage  RoleOnPage[]
  active      Boolean      @default(true)
  defaultRole Boolean      @default(false)

  @@unique([companyId, name])
}

model RoleOnPage {
  id     Int     @id @default(autoincrement())
  role   Role    @relation(fields: [roleId], references: [id], onDelete: Cascade)
  roleId Int
  page   Page    @relation(fields: [pageId], references: [id], onDelete: Cascade)
  pageId Int
  read   Boolean @default(false)
  create Boolean @default(false)
  edit   Boolean @default(false)
  delete Boolean @default(false)

  @@unique([roleId, pageId])
}

model User {
  id                       Int               @id @default(autoincrement())
  username                 String            @unique
  email                    String?
  Employee                 Employee?         @relation(fields: [employeeId], references: [id])
  password                 String
  role                     Role?             @relation(fields: [roleId], references: [id])
  roleId                   Int?
  otp                      String?
  active                   Boolean           @default(true)
  UserOnBranch             UserOnBranch[]
  employeeId               Int?
  partyCreatedBy           Party[]           @relation(name: "createdBy")
  partyUpdatedBy           Party[]           @relation(name: "updatedBy")
  PaymentCreatedBy         Payment[]         @relation(name: "createdBy")
  PaymentUpdatedBy         Payment[]         @relation(name: "updatedBy")
  DeliveryChallanCreatedBy DeliveryChallan[] @relation(name: "createdBy")
  DeliveryChallanUpdatedBy DeliveryChallan[] @relation(name: "updatedBy")
  DeliveryInvoiceCreatedBy DeliveryInvoice[] @relation(name: "createdBy")
  DeliveryInvoiceUpdatedBy DeliveryInvoice[] @relation(name: "updatedBy")
  partyBranchCreatedBy     PartyBranch[]     @relation(name: "createdBy")
  partyBranchUpdatedBy     PartyBranch[]     @relation(name: "updatedBy")
  openingBalanceCreatedBy  OpeningBalance[]  @relation(name: "createdBy")
  openingBalancesUpdatedBy OpeningBalance[]  @relation(name: "updatedBy")
  poCreatedBy              Po[]              @relation(name: "createdBy")
  poUpdatedBy              Po[]              @relation(name: "updatedBy")
}

model Employee {
  id                 Int               @id @default(autoincrement())
  name               String
  email              String?
  regNo              String?           @unique
  chamberNo          String?
  department         Department?       @relation(fields: [departmentId], references: [id])
  departmentId       Int?
  joiningDate        DateTime?
  fatherName         String?
  dob                DateTime?
  gender             Gender?
  maritalStatus      MaritalStatus?
  bloodGroup         BloodGroup?
  panNo              String?
  consultFee         String?
  salaryPerMonth     String?
  commissionCharges  String?
  mobile             BigInt?
  accountNo          String?
  ifscNo             String?
  branchName         String?
  bankName           String?
  degree             String?
  specialization     String?
  localAddress       String?
  localCity          City?             @relation("localCity", fields: [localCityId], references: [id])
  localCityId        Int?
  localPincode       Int?
  permAddress        String?
  permCity           City?             @relation("permCity", fields: [permCityId], references: [id])
  permCityId         Int?
  permPincode        Int?
  active             Boolean?          @default(true)
  image              Bytes?            @db.LongBlob
  Branch             Branch?           @relation(fields: [branchId], references: [id])
  branchId           Int?
  EmployeeCategory   EmployeeCategory? @relation(fields: [employeeCategoryId], references: [id])
  employeeCategoryId Int?
  permanent          Boolean?          @default(false)
  leavingReason      String?
  leavingDate        DateTime?
  canRejoin          Boolean?          @default(true)
  rejoinReason       String?
  createdAt          DateTime?         @default(now())
  updatedAt          DateTime?         @updatedAt
  User               User[]
}

model FinYear {
  id              Int               @id @default(autoincrement())
  from            DateTime
  to              DateTime
  Company         Company?          @relation(fields: [companyId], references: [id])
  companyId       Int?
  active          Boolean           @default(true)
  DeliveryChallan DeliveryChallan[]
  DeliveryInvoice DeliveryInvoice[]
  openingBalances OpeningBalance[]
}

model EmployeeCategory {
  id              Int        @id @default(autoincrement())
  name            String
  code            String
  Branch          Branch?    @relation(fields: [branchId], references: [id])
  branchId        Int?
  active          Boolean    @default(true)
  defaultCategory Boolean    @default(false)
  Employee        Employee[]
}

model Country {
  id        Int     @id @default(autoincrement())
  name      String
  code      String
  state     State[]
  active    Boolean @default(true)
  Company   Company @relation(fields: [companyId], references: [id])
  companyId Int
}

model State {
  id        Int     @id @default(autoincrement())
  name      String
  code      String
  gstNo     String
  country   Country @relation(fields: [countryId], references: [id])
  countryId Int
  city      City[]
  active    Boolean @default(true)
}

model City {
  id              Int           @id @default(autoincrement())
  name            String
  code            String
  state           State         @relation(fields: [stateId], references: [id])
  stateId         Int
  active          Boolean       @default(true)
  doctorLocalCity Employee[]    @relation(name: "localCity")
  doctorPermCity  Employee[]    @relation(name: "permCity")
  Party           Party[]
  PartyBranch     PartyBranch[]
}

model Department {
  id        Int        @id @default(autoincrement())
  name      String
  code      String
  active    Boolean    @default(true)
  doctor    Employee[] @relation()
  Company   Company    @relation(fields: [companyId], references: [id])
  companyId Int
}

enum PageType {
  Masters
  Transactions
  Reports
  AdminAccess
}

model PageGroup {
  id     Int      @id @default(autoincrement())
  type   PageType
  name   String
  Page   Page[]
  active Boolean  @default(true)
}

enum PrefixCategory {
  Default
  Specific
}

enum BloodGroup {
  AP
  BP
  AN
  BN
  ABP
  ABN
  OP
  ON
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum MaritalStatus {
  SINGLE
  MARRIED
  SEPARATED
}

model PartyCategory {
  id        Int      @id @default(autoincrement())
  name      String
  code      String
  Company   Company? @relation(fields: [companyId], references: [id])
  companyId Int?
  active    Boolean  @default(true)
}

model Party {
  id                Int       @id @default(autoincrement())
  name              String
  code              String?
  aliasName         String?
  displayName       String?
  address           String?
  City              City?     @relation(fields: [cityId], references: [id])
  cityId            Int?
  pincode           Int?
  panNo             String?
  tinNo             String?
  cstNo             String?
  cstDate           DateTime? @db.Date
  cinNo             String?
  faxNo             String?
  email             String?
  website           String?
  contactPersonName String?
  gstNo             String?
  costCode          String?
  active            Boolean?  @default(true)
  contactMobile     BigInt?   @default(0)
  Company           Company?  @relation(fields: [companyId], references: [id])
  companyId         Int?
  yarn              Boolean?  @default(false)
  fabric            Boolean?  @default(false)
  accessoryGroup    Boolean?  @default(false)
  createdAt         DateTime? @default(now())
  updatedAt         DateTime? @updatedAt
  createdBy         User?     @relation("createdBy", fields: [createdById], references: [id])
  createdById       Int?
  updatedBy         User?     @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById       Int?
  isSupplier        Boolean?  @default(false)
  isCustomer        Boolean?  @default(false)

  isBranch             Boolean?          @default(false)
  landMark             String?
  contact              String?
  designation          String?
  department           String?
  contactPersonEmail   String?
  contactNumber        String?
  alterContactNumber   String?
  bankname             String?
  bankBranchName       String?
  accountNumber        String?
  ifscCode             String?
  PurchaseBillSupplier PurchaseBill[]    @relation(name: "supplier")
  SalesBillSupplier    SalesBill[]       @relation(name: "supplier")
  PurchaseReturn       PurchaseReturn[]  @relation(name: "supplier")
  SalesReturn          SalesReturn[]     @relation(name: "supplier")
  coa                  BigInt?
  soa                  BigInt?
  msmeNo               String?
  companyAlterNumber   String?
  partyCode            String?
  parentId             String?
  BranchType           BranchType?       @relation(fields: [branchTypeId], references: [id])
  branchTypeId         Int?
  Payment              Payment[]
  Supplier             DeliveryChallan[] @relation(name: "supplier")
  DeliveryTo           DeliveryChallan[] @relation(name: "deliveryTo")
  DeliveryInvoice      DeliveryInvoice[]
  ledgers              Ledger[]
  attachments          attachments[]
  PartyBranch          PartyBranch[]
  openingBalances      OpeningBalance[]
  PoSupplier           Po[]              @relation(name: "supplier")
  PoDelivery           Po[]              @relation(name: "deliveryTo")
}

model PartyBranch {
  id                 Int                 @id @default(autoincrement())
  Party              Party?              @relation(fields: [partyId], references: [id], onDelete: Cascade)
  partyId            Int?
  name               String
  code               String?
  aliasName          String?
  displayName        String?
  address            String?
  City               City?               @relation(fields: [cityId], references: [id])
  cityId             Int?
  pincode            Int?
  panNo              String?
  tinNo              String?
  cstNo              String?
  cstDate            DateTime?           @db.Date
  cinNo              String?
  faxNo              String?
  email              String?
  website            String?
  contactPersonName  String?
  gstNo              String?
  costCode           String?
  active             Boolean?            @default(true)
  contactMobile      BigInt?             @default(0)
  Company            Company?            @relation(fields: [companyId], references: [id])
  companyId          Int?
  yarn               Boolean?            @default(false)
  fabric             Boolean?            @default(false)
  accessoryGroup     Boolean?            @default(false)
  createdAt          DateTime?           @default(now())
  updatedAt          DateTime?           @updatedAt
  createdBy          User?               @relation("createdBy", fields: [createdById], references: [id])
  createdById        Int?
  updatedBy          User?               @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById        Int?
  isSupplier         Boolean?            @default(false)
  isCustomer         Boolean?            @default(false)
  landMark           String?
  contact            String?
  designation        String?
  department         String?
  contactPersonEmail String?
  contactNumber      String?
  alterContactNumber String?
  bankname           String?
  bankBranchName     String?
  accountNumber      String?
  ifscCode           String?
  coa                BigInt?
  soa                BigInt?
  msmeNo             String?
  companyAlterNumber String?
  partyCode          String?
  Branchattachments  Branchattachments[]
}

model attachments {
  id       Int       @id @default(autoincrement())
  Party    Party?    @relation(fields: [partyId], references: [id], onDelete: Cascade)
  partyId  Int?
  date     DateTime?
  name     String?
  fileName String?
  filePath String?
}

model Branchattachments {
  id            Int          @id @default(autoincrement())
  PartyBranch   PartyBranch? @relation(fields: [partyBranchId], references: [id], onDelete: Cascade)
  partyBranchId Int?
  date          DateTime?
  name          String?
  fileName      String?
  filePath      String?
}

model ProductBrand {
  id             Int              @id @default(autoincrement())
  name           String?          @unique
  code           String?
  active         Boolean          @default(true)
  Company        Company?         @relation(fields: [companyId], references: [id])
  companyId      Int?
  Product        Product[]
  PoBillItems    PoBillItems[]
  SalesBillItems SalesBillItems[]
}

model ProductCategory {
  id             Int              @id @default(autoincrement())
  name           String?          @unique
  active         Boolean          @default(true)
  Company        Company?         @relation(fields: [companyId], references: [id])
  companyId      Int?
  Product        Product[]
  PoBillItems    PoBillItems[]
  SalesBillItems SalesBillItems[]
}

model Uom {
  id                     Int                      @id @default(autoincrement())
  name                   String?                  @unique
  active                 Boolean                  @default(true)
  Company                Company?                 @relation(fields: [companyId], references: [id])
  companyId              Int?
  Product                Product[]
  ProductUomPriceDetails ProductUomPriceDetails[]

  PoReturnItems        PoReturnItems[]
  SalesBillItems       SalesBillItems[]
  SalesReturn          SalesReturn[]
  SalesReturnItems     SalesReturnItems[]
  DeliveryChallanItems DeliveryChallanItems[]
  DeliveryInvoiceItems DeliveryInvoiceItems[]
  poItems              PoItems[]
}

model ProductUomPriceDetails {
  id              Int          @id @default(autoincrement())
  Product         Product      @relation(fields: [productId], references: [id])
  Uom             Uom?         @relation(fields: [uomId], references: [id], onDelete: Restrict)
  price           Float        @default(0)
  uomId           Int?
  productId       Int
  PoBillItems     PoBillItems? @relation(fields: [poBillItemsId], references: [id])
  poBillItemsId   Int?
  poReturnItemsId Int?
}

model Product {
  id                     Int                      @id @default(autoincrement())
  name                   String?                  @unique
  code                   String?
  ProductBrand           ProductBrand?            @relation(fields: [productBrandId], references: [id], onDelete: Restrict)
  productBrandId         Int?
  ProductCategory        ProductCategory?         @relation(fields: [productCategoryId], references: [id], onDelete: Restrict)
  productCategoryId      Int?
  active                 Boolean                  @default(true)
  Company                Company?                 @relation(fields: [companyId], references: [id], onDelete: Restrict)
  companyId              Int?
  price                  Float?                   @default(0)
  PoBillItems            PoBillItems[]
  Stock                  Stock[]
  SalesBillItems         SalesBillItems[]
  PoReturnItems          PoReturnItems[]
  SalesReturnItems       SalesReturnItems[]
  uomId                  Int?
  Uom                    Uom?                     @relation(fields: [uomId], references: [id], onDelete: Restrict)
  ProductUomPriceDetails ProductUomPriceDetails[]
  OpeningStockItems      OpeningStockItems[]
}

model PurchaseBill {
  id             Int              @id @default(autoincrement())
  supplier       Party?           @relation("supplier", fields: [supplierId], references: [id], onDelete: Restrict)
  supplierId     Int?
  supplierDcNo   String?
  Branch         Branch?          @relation(fields: [branchId], references: [id])
  branchId       Int?
  address        String?
  place          String?
  docId          String?
  createdAt      DateTime         @default(now())
  dueDate        DateTime         @db.Date
  selectedDate   DateTime?        @db.Date
  active         Boolean          @default(true)
  Company        Company?         @relation(fields: [companyId], references: [id])
  companyId      Int?
  netBillValue   Float?
  icePrice       Float?
  packingCharge  Float?
  labourCharge   Float?
  tollgate       Float?
  transport      Float?
  ourPrice       Float?
  PoBillItems    PoBillItems[]
  PurchaseReturn PurchaseReturn[]
}

model PoBillItems {
  id                     Int                      @id @default(autoincrement())
  PurchaseBill           PurchaseBill?            @relation(fields: [purchaseBillId], references: [id], onDelete: Cascade)
  purchaseBillId         Int?
  box                    Float?
  Product                Product                  @relation(fields: [productId], references: [id])
  productId              Int
  qty                    Float?
  price                  Float?
  PoReturnItems          PoReturnItems[]
  ProductUomPriceDetails ProductUomPriceDetails[]
  Stock                  Stock?
  stockQty               Float?
  ProductBrand           ProductBrand?            @relation(fields: [productBrandId], references: [id])
  productBrandId         Int?
  ProductCategory        ProductCategory?         @relation(fields: [productCategoryId], references: [id])
  productCategoryId      Int?
}

model PurchaseReturn {
  id             Int             @id @default(autoincrement())
  supplier       Party?          @relation("supplier", fields: [supplierId], references: [id], onDelete: Restrict)
  supplierId     Int?
  Branch         Branch?         @relation(fields: [branchId], references: [id])
  branchId       Int?
  address        String?
  place          String?
  docId          String?
  createdAt      DateTime?       @default(now())
  dueDate        DateTime?       @db.Date
  active         Boolean?        @default(true)
  Company        Company?        @relation(fields: [companyId], references: [id])
  companyId      Int?
  PurchaseBill   PurchaseBill    @relation(fields: [purchaseBillId], references: [id])
  purchaseBillId Int
  PoReturnItems  PoReturnItems[]
}

model PoReturnItems {
  id                  Int             @id @default(autoincrement())
  PurchaseReturn      PurchaseReturn? @relation(fields: [purchaseReturnId], references: [id], onDelete: Cascade)
  purchaseReturnId    Int?
  Product             Product?        @relation(fields: [productId], references: [id], onDelete: Restrict)
  productId           Int?
  PoBillItems         PoBillItems?    @relation(fields: [purchaseBillItemsId], references: [id], onDelete: Restrict)
  purchaseBillItemsId Int?
  qty                 Float?
  stockQty            Float?
  poQty               Float?
  Stock               Stock?
  Uom                 Uom?            @relation(fields: [uomId], references: [id], onDelete: Restrict)
  uomId               Int?
}

enum StockInOrOut {
  In
  Out
}

model Stock {
  id                  Int                @id @default(autoincrement())
  inOrOut             StockInOrOut?
  Product             Product?           @relation(fields: [productId], references: [id], onDelete: Restrict)
  productId           Int?
  qty                 Float?
  PoBillItems         PoBillItems?       @relation(fields: [poBillItemsId], references: [id], onDelete: Cascade)
  poBillItemsId       Int?               @unique
  Branch              Branch?            @relation(fields: [branchId], references: [id])
  branchId            Int?
  SalesBillItems      SalesBillItems?    @relation(fields: [salesBillItemsId], references: [id], onDelete: Cascade)
  salesBillItemsId    Int?               @unique
  createdAt           DateTime?          @default(now())
  PoReturnItems       PoReturnItems?     @relation(fields: [poReturnItemsId], references: [id], onDelete: Cascade)
  poReturnItemsId     Int?               @unique
  SalesReturnItems    SalesReturnItems?  @relation(fields: [salesReturnItemsId], references: [id], onDelete: Cascade)
  salesReturnItemsId  Int?               @unique
  OpeningStockItems   OpeningStockItems? @relation(fields: [OpeningStockItemsId], references: [id], onDelete: Cascade)
  OpeningStockItemsId Int?               @unique
}

model SalesBill {
  id             Int              @id @default(autoincrement())
  supplier       Party?           @relation("supplier", fields: [supplierId], references: [id], onDelete: Restrict)
  supplierId     Int?
  Branch         Branch?          @relation(fields: [branchId], references: [id])
  branchId       Int?
  address        String?
  place          String?
  docId          String?
  createdAt      DateTime         @default(now())
  dueDate        DateTime?        @db.Date
  active         Boolean          @default(true)
  Company        Company?         @relation(fields: [companyId], references: [id])
  companyId      Int?
  SalesBillItems SalesBillItems[]
  SalesReturn    SalesReturn[]
  contactMobile  BigInt?
  name           String?
  isOn           Boolean          @default(false)
  price          Float?
  netBillValue   Int?
  selectedDate   DateTime?        @db.Date
}

model SalesBillItems {
  id                Int                @id @default(autoincrement())
  SalesBill         SalesBill?         @relation(fields: [salesBillId], references: [id], onDelete: Cascade)
  salesBillId       Int?
  ProductBrand      ProductBrand?      @relation(fields: [productBrandId], references: [id], onDelete: Restrict)
  productBrandId    Int?
  ProductCategory   ProductCategory?   @relation(fields: [productCategoryId], references: [id], onDelete: Restrict)
  productCategoryId Int?
  Product           Product            @relation(fields: [productId], references: [id], onDelete: Restrict)
  productId         Int
  qty               Float?
  price             Float?
  stockQty          Float?
  Stock             Stock?
  SalesReturnItems  SalesReturnItems[]
  Uom               Uom?               @relation(fields: [uomId], references: [id], onDelete: Restrict)
  uomId             Int?
}

model SalesReturn {
  id               Int                @id @default(autoincrement())
  supplier         Party?             @relation("supplier", fields: [supplierId], references: [id], onDelete: Restrict)
  supplierId       Int?
  Branch           Branch?            @relation(fields: [branchId], references: [id])
  branchId         Int?
  address          String?
  place            String?
  docId            String?
  createdAt        DateTime?          @default(now())
  dueDate          DateTime?          @db.Date
  active           Boolean            @default(true)
  Company          Company?           @relation(fields: [companyId], references: [id])
  companyId        Int?
  SalesBill        SalesBill          @relation(fields: [salesBillId], references: [id], onDelete: Restrict)
  salesBillId      Int
  SalesReturnItems SalesReturnItems[]
  Uom              Uom?               @relation(fields: [uomId], references: [id])
  uomId            Int?
}

model SalesReturnItems {
  id               Int             @id @default(autoincrement())
  SalesReturn      SalesReturn?    @relation(fields: [salesReturnId], references: [id], onDelete: Cascade)
  salesReturnId    Int?
  Product          Product?        @relation(fields: [productId], references: [id], onDelete: Restrict)
  productId        Int?
  SalesBillItems   SalesBillItems? @relation(fields: [salesBillItemsId], references: [id], onDelete: Restrict)
  salesBillItemsId Int?
  qty              Float?
  stockQty         Float?
  salesQty         Float?
  Stock            Stock?
  Uom              Uom?            @relation(fields: [uomId], references: [id], onDelete: Restrict)
  uomId            Int?
}

model OpeningStock {
  id                Int                 @id @default(autoincrement())
  Branch            Branch?             @relation(fields: [branchId], references: [id])
  branchId          Int?
  address           String?
  place             String?
  docId             String?
  createdAt         DateTime            @default(now())
  dueDate           DateTime            @db.Date
  Company           Company?            @relation(fields: [companyId], references: [id])
  companyId         Int?
  OpeningStockItems OpeningStockItems[]
}

model OpeningStockItems {
  id             Int           @id @default(autoincrement())
  OpeningStock   OpeningStock? @relation(fields: [OpeningStockId], references: [id], onDelete: Cascade)
  OpeningStockId Int?
  box            Float?
  Product        Product?      @relation(fields: [productId], references: [id])
  productId      Int?
  qty            Float?
  price          Float?
  Stock          Stock?
  stockQty       Float?
  stockId        Int?
}

model Payment {
  id              Int      @id @default(autoincrement())
  docId           String
  Party           Party    @relation(fields: [partyId], references: [id], onDelete: Restrict)
  partyId         Int
  isTaxBill       Boolean  @default(false)
  Branch          Branch?  @relation(fields: [branchId], references: [id])
  branchId        Int?
  createdBy       User     @relation("createdBy", fields: [createdById], references: [id])
  createdById     Int
  updatedBy       User?    @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById     Int?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  paymentMode     String
  isDeleted       Boolean  @default(false)
  cvv             DateTime
  paidAmount      Int?     @default(0)
  paymentType     String
  totalBillAmount Int?
  discount        Int?     @default(0)
  paymentRefNo    String?
  totalAmount     Int?
}

model Style {
  id        Int     @id @default(autoincrement())
  name      String?
  aliasName String?
  code      String?

  active               Boolean?               @default(false)
  DeliveryChallanItems DeliveryChallanItems[]
  DeliveryInvoiceItems DeliveryInvoiceItems[]
}

model StyleItem {
  id                   Int                    @id @default(autoincrement())
  name                 String?
  aliasName            String?
  code                 String?
  active               Boolean?               @default(false)
  DeliveryChallanItems DeliveryChallanItems[]
  DeliveryInvoiceItems DeliveryInvoiceItems[]
  poItems              PoItems[]
}

model DeliveryChallan {
  id                   Int                    @id @default(autoincrement())
  docId                String?
  active               Boolean?               @default(false)
  Party                Party?                 @relation("supplier", fields: [supplierId], references: [id], onDelete: Restrict)
  supplierId           Int?
  Branch               Branch?                @relation(fields: [branchId], references: [id])
  branchId             Int?
  deliveryType         String?
  DeliveryParty        Party?                 @relation("deliveryTo", fields: [deliveryPartyId], references: [id])
  deliveryPartyId      Int?
  createdBy            User?                  @relation("createdBy", fields: [createdById], references: [id])
  createdById          Int?
  updatedBy            User?                  @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById          Int?
  isDeleted            Boolean?               @default(false)
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @updatedAt
  dcNo                 String?
  dcDate               DateTime?
  remarks              String?
  vechineNo            String?
  deliveryTo           Int?
  FinYear              FinYear?               @relation(fields: [finYearId], references: [id])
  finYearId            Int?
  DeliveryChallanItems DeliveryChallanItems[]
  DeliveryInvoiceItems DeliveryInvoiceItems[]
}

model DeliveryChallanItems {
  id                   Int                    @id @default(autoincrement())
  DeliveryChallan      DeliveryChallan?       @relation(fields: [deliveryChallanId], references: [id], onDelete: Cascade)
  deliveryChallanId    Int?
  Style                Style?                 @relation(fields: [styleId], references: [id], onDelete: Restrict)
  styleId              Int?
  StyleItem            StyleItem?             @relation(fields: [styleItemId], references: [id], onDelete: Restrict)
  styleItemId          Int?
  noOfBox              String?
  Uom                  Uom?                   @relation(fields: [uomId], references: [id], onDelete: Restrict)
  uomId                Int?
  Color                Color?                 @relation(fields: [colorId], references: [id], onDelete: Restrict)
  colorId              Int?
  Hsn                  Hsn?                   @relation(fields: [hsnId], references: [id], onDelete: Restrict)
  hsnId                Int?
  qty                  Float?
  active               Boolean?               @default(false)
  isInvoice            Boolean?               @default(false)
  DeliveryInvoiceItems DeliveryInvoiceItems[]
}

model Color {
  id                   Int                    @id @default(autoincrement())
  name                 String?
  active               Boolean?               @default(true)
  DeliveryChallanItems DeliveryChallanItems[]
  DeliveryInvoiceItems DeliveryInvoiceItems[]
}

model DeliveryInvoice {
  id                   Int                    @id @default(autoincrement())
  docId                String?
  Party                Party?                 @relation(fields: [supplierId], references: [id], onDelete: Restrict)
  supplierId           Int?
  Branch               Branch?                @relation(fields: [branchId], references: [id])
  branchId             Int?
  FinYear              FinYear?               @relation(fields: [finYearId], references: [id])
  finYearId            Int?
  deliveryType         String?
  createdBy            User?                  @relation("createdBy", fields: [createdById], references: [id])
  createdById          Int?
  updatedBy            User?                  @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById          Int?
  isDeleted            Boolean?               @default(false)
  createdAt            DateTime               @default(now())
  updatedAt            DateTime               @updatedAt
  dcNo                 String?
  dcDate               DateTime?
  transportMode        String?
  transporter          String?
  vehicleNo            String?
  remarks              String?
  termsandcondtions    String?
  DeliveryInvoiceItems DeliveryInvoiceItems[]
  Ledger               Ledger?
  discountType         String?
  discountValue        Float?
  taxPercent           Float?
}

model DeliveryInvoiceItems {
  id                     Int                   @id @default(autoincrement())
  deliveryInvoice        DeliveryInvoice?      @relation(fields: [deliveryInvoiceId], references: [id], onDelete: Cascade)
  deliveryInvoiceId      Int?
  Style                  Style?                @relation(fields: [styleId], references: [id], onDelete: Restrict)
  styleId                Int?
  StyleItem              StyleItem?            @relation(fields: [styleItemId], references: [id], onDelete: Restrict)
  styleItemId            Int?
  noOfBox                String?
  Uom                    Uom?                  @relation(fields: [uomId], references: [id], onDelete: Restrict)
  uomId                  Int?
  Color                  Color?                @relation(fields: [colorId], references: [id], onDelete: Restrict)
  colorId                Int?
  qty                    Float?
  active                 Boolean               @default(false)
  DeliveryChallanItems   DeliveryChallanItems? @relation(fields: [deliveryChallanItemsId], references: [id])
  deliveryChallanItemsId Int?
  price                  Float?
  DeliveryChallan        DeliveryChallan?      @relation(fields: [deliveryChallanId], references: [id], onDelete: Cascade)
  deliveryChallanId      Int?
  invoiceQty             Float?
  Hsn                    Hsn?                  @relation(fields: [hsnId], references: [id], onDelete: Restrict)
  hsnId                  Int?
}

enum LedgerEntryType {
  Purchase_Bill
  Process_Bill
  Sales
  My_Payment
  Customer_Payment
  Credit_Note
  Debit_Note
  Opening_Balance
  Printing_Job_Work
}

enum LedgerType {
  Supplier
  Customer
}

enum Credit_Debit {
  Credit
  Debit
}

model Ledger {
  id                Int              @id @default(autoincrement())
  EntryType         LedgerEntryType?
  LedgerType        LedgerType?
  creditOrDebit     Credit_Debit?
  DeliveryInvoice   DeliveryInvoice? @relation(fields: [deliveryInvoiceId], references: [id], onDelete: Cascade)
  deliveryInvoiceId Int?             @unique
  Party             Party?           @relation(fields: [partyId], references: [id], onDelete: Cascade)
  partyId           Int?
  amount            Float?
  dcNo              String?
  dcDate            DateTime?
  partyBillDate     DateTime?        @db.Date
  partyBillNo       String?
  createdAt         DateTime?        @default(now())
  updatedAt         DateTime?        @updatedAt
}

model TaxTerm {
  id                 Int                  @id @default(autoincrement())
  name               String
  isPoWise           Boolean              @default(false)
  Company            Company              @relation(fields: [companyId], references: [id])
  companyId          Int
  active             Boolean              @default(true)
  TaxTemplateDetails TaxTemplateDetails[]
}

model TaxTemplate {
  id                 Int                  @id @default(autoincrement())
  name               String
  Company            Company              @relation(fields: [companyId], references: [id])
  companyId          Int
  active             Boolean              @default(true)
  TaxTemplateDetails TaxTemplateDetails[]
  pos                Po[]
}

model TaxTemplateDetails {
  id            Int         @id @default(autoincrement())
  TaxTemplate   TaxTemplate @relation(fields: [taxTemplateId], references: [id], onDelete: Cascade)
  taxTemplateId Int
  TaxTerm       TaxTerm     @relation(fields: [taxTermId], references: [id])
  taxTermId     Int
  displayName   String
  value         String?
  amount        String?
}

model Hsn {
  id                   Int                    @id @default(autoincrement())
  name                 String
  active               Boolean                @default(true)
  tax                  String?
  DeliveryChallanItems DeliveryChallanItems[]
  DeliveryInvoiceItems DeliveryInvoiceItems[]
  poItems              PoItems[]
}

model BranchType {
  id        Int      @id @default(autoincrement())
  name      String?
  active    Boolean? @default(false)
  aliasName String?
  Party     Party[]
}

model OpeningBalance {
  id           Int       @id @default(autoincrement())
  createdAt    DateTime? @default(now())
  updatedAt    DateTime? @updatedAt
  Company      Company?  @relation(fields: [companyId], references: [id])
  companyId    Int?
  branch       Branch?   @relation(fields: [branchId], references: [id])
  branchId     Int?
  createdBy    User?     @relation("createdBy", fields: [createdById], references: [id])
  createdById  Int?
  updatedBy    User?     @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById  Int?
  finYear      FinYear?  @relation(fields: [finYearId], references: [id])
  finYearId    Int?
  docId        String?
  date         DateTime?
  partCategory String?
  Party        Party     @relation(fields: [partyId], references: [id], onDelete: Cascade)
  partyId      Int
  amount       Int?
}

model Po {
  id               Int          @id @default(autoincrement())
  docId            String?
  docDate          DateTime?
  dueDate          DateTime?
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  createdBy        User?        @relation("createdBy", fields: [createdById], references: [id])
  createdById      Int?
  updatedBy        User?        @relation("updatedBy", fields: [updatedById], references: [id])
  updatedById      Int?
  poType           String?
  TaxTemplate      TaxTemplate? @relation(fields: [taxTemplateId], references: [id], onDelete: Cascade)
  taxTemplateId    Int?
  active           Boolean?     @default(true)
  deliveryType     String?
  DeliveryParty    Party?       @relation("deliveryTo", fields: [deliveryToId], references: [id])
  deliveryToId     Int?
  DeliveryBranch   Branch?      @relation("deliveryBranch", fields: [deliveryBranchId], references: [id])
  deliveryBranchId Int?
  termsAndCondtion String?
  remarks          String?
  Branch           Branch?      @relation("poRaisedBranch", fields: [branchId], references: [id])
  branchId         Int?
  Supplier         Party?       @relation("supplier", fields: [supplierId], references: [id])
  supplierId       Int?
  poItems          PoItems[]
}

model PoItems {
  id            Int        @id @default(autoincrement())
  Po            Po?        @relation(fields: [poId], references: [id], onDelete: Cascade)
  poId          Int?
  Uom           Uom?       @relation(fields: [uomId], references: [id])
  uomId         Int?
  StyleItem     StyleItem? @relation(fields: [styleItemId], references: [id])
  styleItemId   Int?
  Hsn           Hsn?       @relation(fields: [hsnId], references: [id])
  hsnId         Int?
  qty           Float?
  price         Float?
  discountType  String?
  discountValue Float?
  taxPercent    Float?
}
